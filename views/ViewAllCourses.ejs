<!DOCTYPE html>
<html>
<title>QuarkX</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Quicksand">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source Serif Pro">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="/QuarkStylesDesktop.css">
<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
<link rel="stylesheet" href="/QuarksLargePh.css">
<link rel="stylesheet" href="/ViewAllCourseStyles.css">

 <meta property="og:url"           content="angshumankashyap.in/QuarkX" />
 <meta property="og:type"          content="website" />
 <meta property="og:title"         content="Join Quarks" />
 <meta property="og:description"   content="Refuel Your Curiosity" />
 <meta property="og:image"         content="images/homeAmoeba.jpg" />
<link rel="stylesheet" href="/w3styles.css">
<link rel="stylesheet" href="/AngzPhStyles.css">

<link rel="icon" href="/QuarkOtherImages/QuarksLogoFinal-1.png">

<script src="slickJS/slick.js" type="text/javascript"></script>
<link rel="stylesheet" href= "/slickCss/slick.css">
<link rel="stylesheet" href= "/slickCss/slick-theme.css">

<link rel="stylesheet" href= "/AngzDesktopStyles.css">

<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

<!-- NAV BAR  -->
<link rel="stylesheet" href="/nav.css">
<script src='https://kit.fontawesome.com/a076d05399.js'></script>

<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script src="https://www.w3schools.com/lib/w3.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/jquery.slick/1.5.0/slick.min.js"> </script>

<script src="https://www.w3schools.com/lib/w3.js"></script>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Lora:ital@1&display=swap" rel="stylesheet">


<!-- NEWLY ADDED Google FONT -->
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Alegreya&family=Concert+One&family=Lora:ital,wght@1,400;1,600;1,700&display=swap" rel="stylesheet">

<!--     ===================================================================
                              Hemburgar Menu
    ===================================================================
 -->

 <script>
    function openSlideMenu(){
      if (screen.width <=768) {
        document.getElementById('side-menu').style.width = '65vw';
        document.getElementById('main').style.marginLeft = '65vw';
        document.getElementById('wholebody').style = '1';
      }
      else {
        document.getElementById('side-menu').style.width = '25vw';
        document.getElementById('main').style.marginLeft = '25vw';
        document.getElementById('wholebody').style = '1';
      }
    }
  
    function closeSlideMenu(){
      document.getElementById('side-menu').style.width = '0';
      document.getElementsByClassName('w3-row').style.opacity = '1';
    }
  </script>


<body style="width:100vw; min-width: 100vw; max-width: 100vw; overflow-x: hidden; background-color: white;">

<section  id="top-navbar">  
    <div id="side-menu" class="side-nav">
      <a href="#" class="btn-close" onclick="closeSlideMenu()">&times;</a>

      <a href="#" id="userImg"> <img id="userImage" src="https://cdn.pixabay.com/photo/2016/06/14/09/33/bulldog-1456110_960_720.png"></a>
      <a href="#" id="username"><%=username%></a>
      <a id="myCoursesTxt" href="../QuarkXAcademy/MyCourses">My Courses</a>
      <a href="../UserProfile/LogOut"><div id="logOutTxt">LOG OUT</div></a>      
      <a href="../signup"><div id="RegiTxt">SIGN IN / REGISTER</div></a>
    </div>
 </section>

<!-- Navbar (sit on top) -->
<div class="w3-top">
  <div class="w3-bar w3-white" id="myNavbar" style="box-shadow: 3px 3px 3px #A8A8A8 ; width:100vw; max-width:100vw; min-width:100vw;">
    <a id="iconBar" class="w3-bar-item w3-left w3-white" href="javascript:void(0);" onclick="openSlideMenu()" title="Toggle Navigation Menu">
        <i class="fa fa-bars"></i>
    </a>
    <div style="cursor: pointer;" class="w3-bar-item"> <img id="QuarksLogo" src="/QuarkOtherImages/QuarksLogoFinal-1.png"> </div> 
    <div style="cursor: pointer;" class="w3-bar-item"><span id="nameQuarks">QuarkX</span></div>
    <a style="cursor: pointer;" href="../signup" ><div style="cursor: pointer;" class="w3-bar-item w3-hide-small" id="loginBtn">Log In</div></a>
    <a href="../signup" style="cursor: pointer;"><div style="cursor: pointer;" class="w3-bar-item w3-hide-small" id="signUpBtn">Sign Up</div></a>
    <div id="usernameDisplay" style="cursor: pointer;" class="w3-bar-item w3-hide-small">
        <div style="text-align: center">Hello <%=username%>!</div>
    </div >
  <!-- Navbar on small screens -->
</div>
</div>

<!-- Lower Nav 
<section id="MobileNavbar" onclick="closeSlideMenu()">
    <div class="nav">
      <a href="../index" class="navlink">
        <i id="iconNav" class="fas fa-user-astronaut"></i>
        <div id="navName">Angshuman</div>
    </a>
        <a href="#" class="navlink">
          <i id="iconNavNow" class="fas fa-home"></i>
          <div id="navName">Academy</div>
        </a>
        <a href="../QuarkX" class="navlink">
            <i id="iconNav" class="fas fa-meteor"></i>
            <div id="navName">QuarkX</div>
        </a>
    </nav>
</section>-->

<form class="w3-hide" id="selectCourseForm" action="../QuarkXAcademy/OrderDetails" style="margin-top: 20vw;" method="POST">
    <input id="Class" type="text" name = "Class" placeholder="Class">
    <input id="Course" type="text" name = "Course" placeholder="Course">
    <input type="text" id="Price" name = "Price" placeholder="Amount">
    <input type="text" id="orderId" name = "orderId" placeholder="Order Id">
    <input type="text" id="username" name = "username" value=<%=username%>>
    <button type="submit" id="submitCourse">Submit</button>
</form> 

<form class="w3-hide">
    <input class="w3-hide" type="text" id="loginFlag" name="loginFlag" value=<%=loginFlag%>>
    <input class="w3-hide" type="text" id="username1" name="username" value=<%=username%>>
</form>



<div id="allCoursesSec">
    <ul id="CoursesList">
        <% var i=0; %>
        <% for(Course of Courses){%>
            <li>
                    <div class="w3-hide" id="allClasses"><%=Course.CLASS_ID%>,</div>
                    <div class="w3-hide" id="allCourses"><%=Course.COURSE_ID%>,</div>
                    <img id="courseImg"src=<%=Course.BUY_COURSE_IMG%>>
                    <u><div id="headTitle"><span id="payDesc">Class <span id="valueTxtClass"><%=Course.CLASS_ID%></span> <%=Course.COURSE_ID%> - Adaptive Learning</span></div></u>
                    <div id="headSubtitle">Instant access for 1 year</div>
                    <b><div class="TxtPrice" id="TxtPrice"><span class="w3-hide"><%=Course.PRICE%>,</span></div></b>
                    <span><s id="TxtFullPrice">₹ 4999</s></span>
                    <span id="discountTxt" class="discountTxt"></span>
                    <div id="savedTxt">You will save <span class="savedAmt" id="savedAmt"></span>on this order</div>
            </li>
        <% i++; %>
        <%}%>
    </ul>
</div>


    <input class="w3-hide" type="text" id="order-amt" name = "Amount" placeholder="Amount">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>


<script>
    
    const ul = document.querySelectorAll('ul');
    
    var AmountSel = $("#CoursesList li #TxtPrice").text();
    var resAmt = AmountSel.split(",");

    var ClassSel = $("#CoursesList li #allClasses").text();
    var resCls = ClassSel.split(",");

    var CourseSel = $("#CoursesList li #allCourses").text();
    var resCourse = CourseSel.split(",");
 
    var fullPrice = 4999;
    var discount=[];


    //IMPORTANT CODE TO COME FOR USE -> SET TEXT OF MULTIPLE ELEMENTS
    var lDiscount;
    var savedAmtTxt;    
    var elements = document.getElementsByClassName("discountTxt");
    var prices = document.getElementsByClassName("TxtPrice");
    var savedAmt = document.getElementsByClassName("savedAmt");
    
    for(var i=0; i<elements.length; i++) {
        lDiscount = ((fullPrice - parseInt(resAmt[i]))/fullPrice) * 100;    
        savedAmtTxt = fullPrice - parseInt(resAmt[i]);
        if (lDiscount>9){
            lDiscount = lDiscount.toString();
            lDiscount = lDiscount.substr(0,2);
            discount.push(lDiscount);
        }
        else{
            lDiscount = lDiscount.toString();
            lDiscount = lDiscount.substr(0);
            discount.push(lDiscount);
        }

            elements[i].innerHTML = discount[i] + "% off";
            prices[i].innerHTML = "₹" + parseInt(resAmt[0]);
            savedAmt[i].innerHTML = "₹" + savedAmtTxt + " ";
    }

    $("#CoursesList li").click(function() {
        var index = $(this).index();
        document.getElementById("Class").value = resCls[index];
        document.getElementById("Course").value = resCourse[index];
        document.getElementById("Price").value = resAmt[index] * 100;

        var url = '/api/payment/order';
        var params = {
        amount: document.getElementById("Price").value,  
        currency: "INR",
        receipt: "su001",
        payment_capture: '1',
        };
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.onreadystatechange = function (res) {
            if (xmlHttp.readyState === 4) {
                res=JSON.parse(xmlHttp.responseText);
                document.getElementById("orderId").value = res.sub.id;
                $("#selectCourseForm").submit();
            }
        }
        xmlHttp.open("POST", url, true); // false for synchronous request
        xmlHttp.withCredentials = true;
        xmlHttp.setRequestHeader("Content-type", "application/json");
        xmlHttp.send(JSON.stringify(params));

    });
</script>

<script>

  $(document).ready(function(){
    var username = document.getElementById('username1').value;
    var loginFlag = document.getElementById('loginFlag').value;

    if (loginFlag == '0' && screen.width>768){
      $("#usernameDisplay").hide();
      $("#loginBtn").show();
      $("#signUpBtn").show();
      $('#RegiTxt').show();
      $('#logOutTxt').hide();
      $('#userImage').hide();
      $('#myCoursesTxt').hide();
    }
    else if (loginFlag == '1' && screen.width>768){   //if logged in
      $("#loginBtn").hide();
      $("#signUpBtn").hide();
      $("#usernameDisplay").show();  
      $('#RegiTxt').hide();
      $('#logOutTxt').show();
      $('#userImage').show();
      $('#username').show();
    }

    if (loginFlag == '1' && screen.width<=768){
      $('#RegiTxt').hide();
      $('#logOutTxt').show();
    }
    else if (loginFlag == '0' && screen.width<=768) {
      $('#RegiTxt').show();
      $('#logOutTxt').hide();
    }
});

</script>



<script>
    AOS.init();
  </script>


</body>
</html>
    